<link rel="import" href="./bower_components/core-ajax/core-ajax.html">
<link rel="import" href="./bower_components/core-icon-button/core-icon-button.html">
<link rel="import" href="./bower_components/core-toolbar/core-toolbar.html">
<link rel="import" href="./bower_components/core-header-panel/core-header-panel.html">
<link rel="import" href="./bower_components/paper-input/paper-input.html">
<link rel="import" href="./bower_components/core-list/core-list.html">


<polymer-element name="city-search">

    <template>
        <style>
            :host {
                position: absolute;
                width: 100%;
                height: 100%;
                box-sizing: border-box;
            }
            #core_header_panel {
                width: 100%;
                height: 100%;
                left: 0px;
                top: 0px;
                position: relative;
            }
            #core_toolbar {
                color: rgb(255, 255, 255);
                background-color: rgb(79, 125, 201);
            }
            #section {
                height: 1000px;
                background: linear-gradient(rgb(214, 227, 231), rgb(173, 216, 230));
            }
            #paper_input {
                top: 0px;
                position: relative;
            }
        </style>
        <core-ajax url="http://localhost:8090/zips/{{cityin}}" handleas="json" auto response="{{resp}}"  hidden></core-ajax>
        <core-header-panel mode="standard" id="core_header_panel">
            <core-toolbar id="core_toolbar" horizontal center>
                <core-icon-button icon="menu" id="core_icon_button"></core-icon-button>
                <div id="div" flex>City suche</div>
                <paper-input label="Welche Stadt?" floatinglabel value="{{cityin}}" id="paper_input"></paper-input>
            </core-toolbar>
            <section id="section" layout vertical>
                <core-list data="{{resp}}" flex height="300px">
                    <template>
                        <div class="item">
                            <span class="from">{{model.city}}</span>
                            <span class="from">{{model.zip}}</span>
                            <span class="from">{{model.loc.x}}</span>
                            <span class="from">{{model.loc.y}}</span>
                            <span class="from">{{model.pop}}</span>
                            <span class="from">{{model.state}}</span>
                        </div>
                    </template>
                </core-list>
            </section>
        </core-header-panel>
    </template>

    <script>

        Polymer({
            cityin: '',
            resp: [],
            respChanged:function(oldValue, newValue){
                console.log(newValue);
            }
        });

    </script>

</polymer-element>